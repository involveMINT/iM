<ng-container *ngIf="state$ | async as state">
  <ion-header>
    <ion-toolbar>
      <ion-title>Log In</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <div class="cont">
      <div class="error-msg" *ngIf="state.errorStatus === ''"></div>
      <div class="error-msg active" *ngIf="state.errorStatus !== ''">
        {{ state.errorStatus }}
      </div>
      <ion-icon src="/assets/involvemint.svg" class="logo"></ion-icon>
      <!-- <ion-button style="width: 100%;" color="light" (click)="doGoogleLogin()">
      <ion-img slot="start" [src]="'/assets/images/google.png'" style="width: 22px;"></ion-img>
      &nbsp;&nbsp; Google Sign In
    </ion-button> -->
      <form [formGroup]="loginForm" (submit)="submit()" novalidate>
        <im-item [touched]="true">
          <ion-icon slot="start" name="mail"></ion-icon>
          <input formControlName="email" name="email" type="email" placeholder="Email" />
          <im-error *ngIf="!loginForm.controls.email.valid && loginForm.controls.email.touched">
            Please enter your email address.
          </im-error>
        </im-item>
        <im-item [touched]="true">
          <ion-icon slot="start" name="lock-closed"></ion-icon>

          <input formControlName="password" name="password" type="password" placeholder="Password"
            [type]="isPasswordVisible ? 'text' : 'password'" />
          <a class="type-toggle" (click)="togglePasswordVisibility()">
            <ion-icon class="show-option" [hidden]="isPasswordVisible" name="eye-off-outline"></ion-icon>
            <ion-icon class="hide-option" [hidden]="!isPasswordVisible" name="eye-outline"></ion-icon>
          </a>
          <im-error *ngIf="!loginForm.controls.password.valid && loginForm.controls.password.touched">
            Please enter your password.
          </im-error>
        </im-item>

        <!-- Implicit button for form when pressing enter button -->
        <button style="display: none" [disabled]="!loginForm.valid" test-attr="login-submit-implicit-button"></button>
      </form>
      <ion-button [disabled]="!loginForm.valid" (click)="submit()" test-attr="login-submit-button">
        Log In
      </ion-button>
      <a (click)="forgotPassword()" [style.margin-top]="'var(--im-padding)'">Forgot Password?</a>
      <span [style.margin-top]="'var(--im-padding)'">
        Don't have an account?
        <a (click)="signUp()">Sign Up</a>
      </span>
    </div>
  </ion-content>
</ng-container>